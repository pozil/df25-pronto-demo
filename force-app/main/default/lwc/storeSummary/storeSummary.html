<template>
  <lightning-card icon-name="custom:custom85">
    <template lwc:if={store.data}>
      <span slot="title">{storeName}</span>
      <lightning-button-icon
        icon-name="utility:expand_alt"
        slot="actions"
        onclick={handleNavigateToRecord}
      >
        <label>Navigate to Record</label>
      </lightning-button-icon>
      <div class="slds-var-m-horizontal_medium">
        <img
          src={pictureURL}
          alt="Storefront picture"
          class="slds-var-m-bottom_small"
        />
        <c-review-stars
          review-score={reviewScore}
          number-of-reviews={numberOfReviews}
          display-mode="full"
          class="slds-var-m-bottom_small"
        ></c-review-stars>
        <lightning-record-form
          object-api-name="Storefront__c"
          record-id={storeId}
          fields={storeFormFields}
          columns="2"
          class="slds-var-m-bottom_medium"
        >
        </lightning-record-form>
        <!-- Menus -->
        <template lwc:if={hasMenus}>
          <h3 class="slds-text-heading_medium slds-var-m-bottom_small">
            Menus
          </h3>
          <div
            class="slds-grid slds-wrap slds-gutters slds-var-m-bottom_medium"
          >
            <template for:each={menus.data} for:item="menu">
              <div key={menu.Id} class="slds-col slds-no-flex">
                <lightning-button
                  variant="brand-outline"
                  label={menu.Menu_Display_Name__c}
                  data-menu-id={menu.Id}
                  onclick={handleMenuClick}
                ></lightning-button>
              </div>
            </template>
          </div>
        </template>
        <!-- Opening hours -->
        <template lwc:if={hasOpeningHours}>
          <h3 class="slds-text-heading_medium slds-var-m-bottom_small">
            Opening hours
          </h3>
          <table class="slds-var-m-horizontal_small">
            <template for:each={openingHours.data} for:item="openingHour">
              <tr key={openingHour.Day_of_Week__c}>
                <td>{openingHour.Day_of_Week__c}</td>
                <td>{openingHour.Opening_Time__c}</td>
                <td>{openingHour.Closing_Time__c}</td>
              </tr>
            </template>
          </table>
        </template>
      </div>
    </template>
    <template lwc:if={hasNoStoreId}>
      <c-error-panel
        friendly-message="Select a storefront to see details"
      ></c-error-panel>
    </template>
    <template lwc:if={store.error}>
      <c-error-panel
        friendly-message="Error retrieving data"
        errors={store.error}
      ></c-error-panel>
    </template>
  </lightning-card>
</template>
